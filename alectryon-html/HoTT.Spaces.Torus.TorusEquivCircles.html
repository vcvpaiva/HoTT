<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>TorusEquivCircles.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.min.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Require Import</span> Basics Types.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Require Import</span> Cubical.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Require Import</span> Spaces.Circle Spaces.Torus.Torus.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
<span class="c">(* In this file we:</span>
<span class="c">    - Prove that the Torus is equivalent to the product of two circles</span>
<span class="c"> *)</span>
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">TorusEquivCircle</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* We use function extensionality when defining the</span>
<span class="c">     map from circles to torus *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span> `{Funext}.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* Here is a cube filler for help with circle recursion into the torus *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk0"><span class="highlight"><span class="kn">Definition</span> <span class="nf">c2t_square_and_cube</span>
    : {s : PathSquare loop_a loop_a
        (ap (Circle_rec _ tbase loop_b) loop)
        (ap (Circle_rec _ tbase loop_b) loop)
      &amp;  PathCube s surf hr hr
         (sq_G1 (Circle_rec_beta_loop _ _ _))
         (sq_G1 (Circle_rec_beta_loop _ _ _))}.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">{s
: PathSquare loop_a loop_a
    (ap (Circle_rec Torus tbase loop_b) loop)
    (ap (Circle_rec Torus tbase loop_b) loop) &amp;
PathCube s surf hr hr
  (sq_G1 (Circle_rec_beta_loop Torus tbase loop_b))
  (sq_G1 (Circle_rec_beta_loop Torus tbase loop_b))}</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">{s
: PathSquare loop_a loop_a
    (ap (Circle_rec Torus tbase loop_b) loop)
    (ap (Circle_rec Torus tbase loop_b) loop) &amp;
PathCube s surf hr hr
  (sq_G1 (Circle_rec_beta_loop Torus tbase loop_b))
  (sq_G1 (Circle_rec_beta_loop Torus tbase loop_b))}</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> cu_fill_left.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* We define the map from the Torus to the Circles *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk2"><span class="highlight"><span class="kn">Definition</span> <span class="nf">t2c</span> : Torus -&gt; Circle * Circle.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Torus -&gt; Circle * Circle</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Torus -&gt; Circle * Circle</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk4"><span class="highlight">srapply Torus_rec.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle * Circle</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk5"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?pb</span> = <span class="nl">?pb</span></span></div></blockquote><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk6"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?pb</span> = <span class="nl">?pb</span></span></div></blockquote><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk7"><hr></label><div class="goal-conclusion"><span class="highlight">PathSquare <span class="nl">?pla</span> <span class="nl">?pla</span> <span class="nl">?plb</span> <span class="nl">?plb</span></span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk8"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle * Circle</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> (base, base). <span class="c">(* The point of the torus is taken to (base, base *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk9"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(base, base) = (base, base)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> (path_prod&#39; loop <span class="mi">1</span>). <span class="c">(* loop_a is taken to loop in the first *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chka"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(base, base) = (base, base)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> (path_prod&#39; <span class="mi">1</span> loop). <span class="c">(* loop_b is taken to loop in the second *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chkb"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathSquare (path_prod&#39; loop <span class="mi">1</span>) (path_prod&#39; loop <span class="mi">1</span>)
  (path_prod&#39; <span class="mi">1</span> loop) (path_prod&#39; <span class="mi">1</span> loop)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> (sq_prod (hr, vr)). <span class="c">(* The square is the obvious product of squares *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* We now define the curried function from the circles to the torus *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chkc"><span class="highlight"><span class="kn">Definition</span> <span class="nf">c2t&#39;</span> : Circle -&gt; Circle -&gt; Torus.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle -&gt; Circle -&gt; Torus</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chkd"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle -&gt; Circle -&gt; Torus</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chke"><span class="highlight">srapply Circle_rec.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle -&gt; Torus</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chkf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chkf"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?b</span> = <span class="nl">?b</span></span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk10"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle -&gt; Torus</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk11"><span class="highlight">srapply Circle_rec.     <span class="c">(* Double circle recursion *)</span></span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Torus</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk12" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk12"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?b</span> = <span class="nl">?b</span></span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk13"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Torus</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> tbase.      <span class="c">(* The basepoint is sent to the point of the torus *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk14"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">tbase = tbase</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> loop_b.     <span class="c">(* The second loop is sent to loop_b *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk15"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle_rec Torus tbase loop_b =
Circle_rec Torus tbase loop_b</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk16"><span class="highlight"><span class="nb">apply</span> path_forall.  <span class="c">(* We use function extensionality here to induct *)</span></span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle_rec Torus tbase loop_b ==
Circle_rec Torus tbase loop_b</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk17"><span class="highlight">srapply Circle_ind_dp.  <span class="c">(* Circle induction as a DPath *)</span></span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
 Circle_rec Torus tbase loop_b x =
 Circle_rec Torus tbase loop_b x) base</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk18" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk18"><hr></label><div class="goal-conclusion"><span class="highlight">DPath
  (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
   Circle_rec Torus tbase loop_b x =
   Circle_rec Torus tbase loop_b x) loop <span class="nl">?b</span> <span class="nl">?b</span></span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk19"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
 Circle_rec Torus tbase loop_b x =
 Circle_rec Torus tbase loop_b x) base</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> loop_a.     <span class="c">(* The first loop is sent to loop_a *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk1a"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">DPath
  (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
   Circle_rec Torus tbase loop_b x =
   Circle_rec Torus tbase loop_b x) loop loop_a loop_a</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk1b"><span class="highlight">srapply sq_dp^-<span class="mi">1</span>. <span class="c">(* This DPath is actually a square *)</span></span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathSquare loop_a loop_a
  (ap (Circle_rec Torus tbase loop_b) loop)
  (ap (Circle_rec Torus tbase loop_b) loop)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> (pr1 c2t_square_and_cube). <span class="c">(* We apply the cap we found above *)</span></span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* Here is the uncurried version *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk1c"><span class="highlight"><span class="kn">Definition</span> <span class="nf">c2t</span> : Circle * Circle -&gt; Torus.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle * Circle -&gt; Torus</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk1d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Circle * Circle -&gt; Torus</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> uncurry, c2t&#39;.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* Computation rules for c2t&#39; as a cube filler *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk1e"><span class="highlight"><span class="kn">Definition</span> <span class="nf">c2t&#39;_beta</span> :
    {bl1 : PathSquare (ap (<span class="kr">fun</span> <span class="nv">y</span> =&gt; c2t&#39; base y) loop) loop_b <span class="mi">1</span> <span class="mi">1</span> &amp;
    {bl2 : PathSquare (ap (<span class="kr">fun</span> <span class="nv">x</span> =&gt; c2t&#39; x base) loop) loop_a <span class="mi">1</span> <span class="mi">1</span> &amp;
    PathCube (sq_ap011 c2t&#39; loop loop) surf bl2 bl2 bl1 bl1}}.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">{bl1
: PathSquare (ap (<span class="kr">fun</span> <span class="nv">y</span> : Circle =&gt; c2t&#39; base y) loop)
    loop_b <span class="mi">1</span> <span class="mi">1</span> &amp;
{bl2
: PathSquare (ap (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt; c2t&#39; x base) loop)
    loop_a <span class="mi">1</span> <span class="mi">1</span> &amp;
PathCube (sq_ap011 c2t&#39; loop loop) surf bl2 bl2 bl1
  bl1}}</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk1f"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">{bl1
: PathSquare (ap (<span class="kr">fun</span> <span class="nv">y</span> : Circle =&gt; c2t&#39; base y) loop)
    loop_b <span class="mi">1</span> <span class="mi">1</span> &amp;
{bl2
: PathSquare (ap (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt; c2t&#39; x base) loop)
    loop_a <span class="mi">1</span> <span class="mi">1</span> &amp;
PathCube (sq_ap011 c2t&#39; loop loop) surf bl2 bl2 bl1
  bl1}}</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk20"><span class="highlight"><span class="nb">refine</span> (_;_;_).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube (sq_ap011 c2t&#39; loop loop) surf <span class="nl">?Goal0</span> <span class="nl">?Goal0</span>
  <span class="nl">?Goal</span> <span class="nl">?Goal</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk21"><span class="highlight"><span class="nb">unfold</span> sq_ap011.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">y</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt; c2t&#39; x y) loop) loop))
  surf <span class="nl">?Goal0</span> <span class="nl">?Goal0</span> <span class="nl">?Goal</span> <span class="nl">?Goal</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* 1. Unfusing ap *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk22"><span class="highlight"><span class="nb">refine</span> (cu_concat_lr (cu_ds (dp_apD_nat
      (<span class="kr">fun</span> <span class="nv">y</span> =&gt; ap_compose _ (<span class="kr">fun</span> <span class="nv">f</span> =&gt; f y) _) _)) _
      (sji0:=?[X1]) (sji1:=<span class="nl">?X1</span>) (sj0i:=?[Y1]) (sj1i:=<span class="nl">?Y1</span>) (pj11:=<span class="mi">1</span>)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">y</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">f</span> : Circle -&gt; Torus =&gt; f y)
           (ap c2t&#39; loop)) loop)) surf <span class="nl">?X1</span> <span class="nl">?X1</span> <span class="nl">?Y1</span> 
  <span class="nl">?Y1</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* 2. Reducing c2t&#39; on loop *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk23"><span class="highlight"><span class="nb">refine</span> (cu_concat_lr (cu_ds (dp_apD_nat
      (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ap_apply_l _ _ @ apD10 (ap _(Circle_rec_beta_loop _ _ _)) x) _)) _
      (sji0:=?[X2]) (sji1:=<span class="nl">?X2</span>) (sj0i:=?[Y2]) (sj1i:=<span class="nl">?Y2</span>) (pj11:=<span class="mi">1</span>)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap10
           (path_forall
              (Circle_rec Torus tbase loop_b)
              (Circle_rec Torus tbase loop_b)
              (Circle_ind_dp
                 (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
                  Circle_rec Torus tbase loop_b x0 =
                  Circle_rec Torus tbase loop_b x0)
                 loop_a
                 (sq_dp^-<span class="mi">1</span> c2t_square_and_cube.<span class="mi">1</span>))) x)
        loop)) surf <span class="nl">?X2</span> <span class="nl">?X2</span> <span class="nl">?Y2</span> <span class="nl">?Y2</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* 3. Reducing ap10 on function extensionality *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk24"><span class="highlight"><span class="nb">refine</span> (cu_concat_lr (cu_ds (dp_apD_nat (ap10_path_forall _ _ _) _)) _
      (sji0:=?[X3]) (sji1:=<span class="nl">?X3</span>) (sj0i:=?[Y3]) (sj1i:=<span class="nl">?Y3</span>) (pj11:=<span class="mi">1</span>)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_dp
     (dp_apD
        (Circle_ind_dp
           (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
            Circle_rec Torus tbase loop_b x =
            Circle_rec Torus tbase loop_b x) loop_a
           (sq_dp^-<span class="mi">1</span> c2t_square_and_cube.<span class="mi">1</span>)) loop))
  surf <span class="nl">?X3</span> <span class="nl">?X3</span> <span class="nl">?Y3</span> <span class="nl">?Y3</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* 4. Reducing Circle_ind_dp on loop *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk25"><span class="highlight"><span class="nb">refine</span> (cu_concat_lr (cu_G11 (ap _ (Circle_ind_dp_beta_loop _ _ _))) _
      (sji0:=?[X4]) (sji1:=<span class="nl">?X4</span>) (sj0i:=?[Y4]) (sj1i:=<span class="nl">?Y4</span>) (pj11:=<span class="mi">1</span>)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube (sq_dp (sq_dp^-<span class="mi">1</span> c2t_square_and_cube.<span class="mi">1</span>)) surf
  <span class="nl">?X4</span> <span class="nl">?X4</span> <span class="nl">?Y4</span> <span class="nl">?Y4</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* 5. collapsing equivalence *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk26"><span class="highlight"><span class="nb">refine</span> (cu_concat_lr (cu_G11 (eisretr _ _)) _
      (sji0:=?[X5]) (sji1:=<span class="nl">?X5</span>) (sj0i:=?[Y5]) (sj1i:=<span class="nl">?Y5</span>) (pj11:=<span class="mi">1</span>)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube c2t_square_and_cube.<span class="mi">1</span> surf <span class="nl">?X5</span> <span class="nl">?X5</span> <span class="nl">?Y5</span> <span class="nl">?Y5</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* 6. filling the cube *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> c2t_square_and_cube.<span class="mi">2</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Local Open Scope</span> path_scope.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Local Open Scope</span> cube_scope.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* We now prove that t2c is a section of c2t *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk27"><span class="highlight"><span class="kn">Definition</span> <span class="nf">t2c2t</span> : c2t o t2c == idmap.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">c2t o t2c == idmap</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk28"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">c2t o t2c == idmap</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* We start with Torus induction *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk29"><span class="highlight"><span class="nb">refine</span> (Torus_ind _ <span class="mi">1</span> _ _ _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">DPathSquare (<span class="kr">fun</span> <span class="nv">x</span> : Torus =&gt; c2t (t2c x) = x) surf
  <span class="nl">?Goal</span> <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* Our DPathSquare is really just a cube *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk2a"><span class="highlight"><span class="nb">apply</span> cu_ds^-<span class="mi">1</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube (sq_dp <span class="nl">?Goal</span>) (sq_dp <span class="nl">?Goal</span>) (sq_dp <span class="nl">?Goal0</span>)
  (sq_dp <span class="nl">?Goal0</span>)
  (sq_ap (<span class="kr">fun</span> <span class="nv">x</span> : Torus =&gt; c2t (t2c x)) surf)
  (sq_ap idmap surf)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* We pretend that our sides have sq_dpath o sq_dpath^-1</span>
<span class="c">      and get rid of them *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk2b"><span class="highlight"><span class="nb">refine</span> (cu_GGGGcc (eisretr _ _)^ (eisretr _ _)^
      (eisretr _ _)^ (eisretr _ _)^ _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube <span class="nl">?Goal</span> <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal0</span>
  (sq_ap (<span class="kr">fun</span> <span class="nv">x</span> : Torus =&gt; c2t (t2c x)) surf)
  (sq_ap idmap surf)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* Apply a symmetry to get the faces on the right side *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk2c"><span class="highlight"><span class="nb">apply</span> cu_rot_tb_fb.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube (sq_ap (<span class="kr">fun</span> <span class="nv">x</span> : Torus =&gt; c2t (t2c x)) surf)
  (sq_ap idmap surf) (sq_tr <span class="nl">?Goal</span>) (sq_tr <span class="nl">?Goal</span>)
  (sq_tr <span class="nl">?Goal0</span>) (sq_tr <span class="nl">?Goal0</span>)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* Clean up other faces *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk2d"><span class="highlight"><span class="nb">refine</span> (cu_ccGGGG (eisretr _ _)^ (eisretr _ _)^
      (eisretr _ _)^ (eisretr _ _)^ _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube (sq_ap (<span class="kr">fun</span> <span class="nv">x</span> : Torus =&gt; c2t (t2c x)) surf)
  (sq_ap idmap surf) <span class="nl">?Goal</span> <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* Now we finish the proof with the following composition of cubes *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">refine</span> ((sq_ap_compose t2c c2t surf)
      @lr (cu_ap c2t (Torus_rec_beta_surf _ _ _ _ _ ))
      @lr (sq_ap_uncurry _ _ _)
      @lr (pr2 (pr2 c2t&#39;_beta))
      @lr (cu_flip_lr (sq_ap_idmap _))).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* NOTE: The last step in the previous proof can be done as a sequence of</span>
<span class="c">     refines however coq really struggles to unify this. Below is the original</span>
<span class="c">     way we proved the last statement before making it short and sweet. As can</span>
<span class="c">     be seen, we need to give refine hints using existential variables which is</span>
<span class="c">     tedious to write out, and perhaps motivates why we wrote it as one big</span>
<span class="c">     concatenation. Ideally the way below should be as smooth as the way above,</span>
<span class="c">     since above is difficult to write directly without having tried below.</span>

<span class="c">    (* Now we decompose the cube with middle sq_ap_compose *)</span>
<span class="c">    (* Note: coq sucks at unifying this so we have to explicitly give paths *)</span>
<span class="c">    refine (cu_concat_lr (sq_ap_compose t2c c2t surf) _</span>
<span class="c">      (sji0:=?[X1]) (sji1:=?X1) (sj0i:=?[Y1]) (sj1i:=?Y1) (pj11:=1)).</span>
<span class="c">    (* Now we reduce (sq_ap t2c surf) *)</span>
<span class="c">    refine (cu_concat_lr (cu_ap c2t (Torus_rec_beta_surf _ _ _ _ _ )) _</span>
<span class="c">      (sji0:=?[X2]) (sji1:=?X2) (sj0i:=?[Y2]) (sj1i:=?Y2) (pj11:=1)).</span>
<span class="c">    (* We now uncurry c2t inside sq_ap *)</span>
<span class="c">    refine (cu_concat_lr (sq_ap_uncurry _ _ _) _</span>
<span class="c">      (sji0:=?[X3]) (sji1:=?X3) (sj0i:=?[Y3]) (sj1i:=?Y3) (pj11:=1)).</span>
<span class="c">    (* Reduce sq_ap2 c2t&#39; loop loop *)</span>
<span class="c">    refine (cu_concat_lr (pr2 (pr2 c2t&#39;_beta)) _</span>
<span class="c">      (sji0:=?[X4]) (sji1:=?X4) (sj0i:=?[Y4]) (sj1i:=?Y4) (pj11:=1)).</span>
<span class="c">    (* Finally flip and sq_ap idmap *)</span>
<span class="c">    refine (cu_flip_lr (sq_ap_idmap _)).</span>

<span class="c">  *)</span>

</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Notation</span> <span class="nf">apcs</span> := (ap_compose_sq _ _ _).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk2e"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sq_ap011_compose</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B -&gt; C) (<span class="nv">g</span> : C -&gt; D)
    {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} (<span class="nv">p</span> : a = a&#39;) {<span class="nv">b</span> <span class="nv">b&#39;</span> : B} (<span class="nv">q</span> : b = b&#39;)
    : PathCube (sq_ap011 (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> =&gt; g (f x y)) p q) (sq_ap g (sq_ap011 f p q))
        apcs apcs apcs apcs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C, D</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A -&gt; B -&gt; C</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">g</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">C -&gt; D</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a, a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">p</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">a = a&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">b, b'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">B</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">q</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">b = b&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_ap011 (<span class="kr">fun</span> (<span class="nv">x</span> : A) (<span class="nv">y</span> : B) =&gt; g (f x y)) p q)
  (sq_ap g (sq_ap011 f p q)) apcs apcs apcs apcs</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk2f"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C, D</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A -&gt; B -&gt; C</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">g</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">C -&gt; D</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a, a'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">A</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">p</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">a = a&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">b, b'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">B</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">q</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">b = b&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_ap011 (<span class="kr">fun</span> (<span class="nv">x</span> : A) (<span class="nv">y</span> : B) =&gt; g (f x y)) p q)
  (sq_ap g (sq_ap011 f p q)) apcs apcs apcs apcs</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">destruct</span> p, q.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
  <span class="c">(* We now prove t2c is a retraction of c2t *)</span>
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk30"><span class="highlight"><span class="kn">Definition</span> <span class="nf">c2t2c</span> : t2c o c2t == idmap.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">t2c o c2t == idmap</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk31"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">t2c o c2t == idmap</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk32"><span class="highlight">rapply prod_ind.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">fst</span> <span class="nv">snd</span> : Circle,
t2c (c2t (fst, snd)) = (fst, snd)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* Start with double circle induction *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk33"><span class="highlight">srefine (Circle_ind_dp _ (Circle_ind_dp _ <span class="mi">1</span> _) _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">DPath
  (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt; t2c (c2t (base, x)) = (base, x))
  loop <span class="mi">1</span> <span class="mi">1</span></span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk34" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk34"><hr></label><div class="goal-conclusion"><span class="highlight">DPath
  (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
   <span class="kr">forall</span> <span class="nv">snd</span> : Circle, t2c (c2t (x, snd)) = (x, snd))
  loop
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
      t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span> <span class="nl">?bl</span>)
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
      t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span> <span class="nl">?bl</span>)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* Change the second loop case into a square and shelve *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk35"><span class="highlight"><span class="mi">1</span>: <span class="nb">apply</span> sq_dp^-<span class="mi">1</span>, sq_tr^-<span class="mi">1</span>; <span class="nb">shelve</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">DPath
  (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
   <span class="kr">forall</span> <span class="nv">snd</span> : Circle, t2c (c2t (x, snd)) = (x, snd))
  loop
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
      t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span>
     (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)))
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
      t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span>
     (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">    <span class="c">(* Take the forall out of the DPath *)</span>
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk36"><span class="highlight"><span class="nb">apply</span> dp_forall_domain.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : Circle,
DPath (<span class="kr">fun</span> <span class="nv">t</span> : Circle =&gt; t2c (c2t (t, x)) = (t, x))
  loop
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
      t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
     (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
      t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
     (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk37"><span class="highlight"><span class="nb">intro</span> x; <span class="nb">apply</span> sq_dp^-<span class="mi">1</span>; <span class="nb">revert</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : Circle,
PathSquare
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
      t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
     (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
  (Circle_ind_dp
     (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
      t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
     (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
  (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x))) loop)
  (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk38"><span class="highlight">srefine (Circle_ind_dp _ _ _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
 PathSquare
   (Circle_ind_dp
      (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
       t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
      (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
   (Circle_ind_dp
      (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
       t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
      (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
   (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x))) loop)
   (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop)) base</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk39" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk39"><hr></label><div class="goal-conclusion"><span class="highlight">DPath
  (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
   PathSquare
     (Circle_ind_dp
        (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
         t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
        (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
     (Circle_ind_dp
        (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
         t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
        (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
     (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x))) loop)
     (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop)) loop 
  <span class="nl">?b</span> <span class="nl">?b</span></span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk3a"><span class="highlight"><span class="mi">1</span>: <span class="nb">apply</span> sq_tr^-<span class="mi">1</span>; <span class="nb">shelve</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">DPath
  (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
   PathSquare
     (Circle_ind_dp
        (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
         t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
        (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
     (Circle_ind_dp
        (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt;
         t2c (c2t (base, x0)) = (base, x0)) <span class="mi">1</span>
        (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) x)
     (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x))) loop)
     (ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop)) loop
  (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>) (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk3b"><span class="highlight"><span class="nb">apply</span> dp_cu.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>) (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>)
  (sq_dp
     (dp_apD
        (Circle_ind_dp
           (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
            t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span>
           (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>))) loop))
  (sq_dp
     (dp_apD
        (Circle_ind_dp
           (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
            t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span>
           (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>))) loop))
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x)))
           loop) loop))
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop) loop))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk3c"><span class="highlight"><span class="nb">refine</span> (cu_ccGGcc _ _ _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="nl">?Goal1</span> =
sq_dp
  (dp_apD
     (Circle_ind_dp
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span>
        (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>))) loop)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk3d"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?Goal2</span> =
sq_dp
  (dp_apD
     (Circle_ind_dp
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         t2c (c2t (base, x)) = (base, x)) <span class="mi">1</span>
        (sq_dp^-<span class="mi">1</span> (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>))) loop)</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk3e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk3e"><hr></label><div class="goal-conclusion"><span class="highlight">PathCube (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>) (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>) <span class="nl">?Goal1</span>
  <span class="nl">?Goal2</span>
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x)))
           loop) loop))
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop) loop))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk3f"><span class="highlight"><span class="mi">1</span>,<span class="mi">2</span>: <span class="nb">refine</span> (ap sq_dp (Circle_ind_dp_beta_loop _ _ _)
      @ eisretr _ _)^.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>) (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>)
  (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>) (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x)))
           loop) loop))
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop) loop))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk40"><span class="highlight"><span class="nb">apply</span> cu_rot_tb_fb.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x)))
           loop) loop))
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop) loop))
  (sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>)) (sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>))
  (sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)) (sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk41"><span class="highlight"><span class="nb">refine</span> (cu_ccGGGG _ _ _ _ _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="nl">?Goal1</span> = sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk42" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk42"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?Goal2</span> = sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal0</span>)</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk43" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk43"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?Goal3</span> = sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk44" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk44"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="nl">?Goal4</span> = sq_tr (sq_tr^-<span class="mi">1</span> <span class="nl">?Goal</span>)</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="torusequivcircles-v-chk45" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="torusequivcircles-v-chk45"><hr></label><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x)))
           loop) loop))
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop) loop))
  <span class="nl">?Goal1</span> <span class="nl">?Goal2</span> <span class="nl">?Goal3</span> <span class="nl">?Goal4</span></span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="torusequivcircles-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="torusequivcircles-v-chk46"><span class="highlight"><span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>: <span class="bp">exact</span> (eisretr _ _)^.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Funext</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">PathCube
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; t2c (c2t (x0, x)))
           loop) loop))
  (sq_dp
     (dp_apD
        (<span class="kr">fun</span> <span class="nv">x</span> : Circle =&gt;
         ap (<span class="kr">fun</span> <span class="nv">x0</span> : Circle =&gt; (x0, x)) loop) loop))
  <span class="nl">?Goal0</span> <span class="nl">?Goal0</span> <span class="nl">?Goal</span> <span class="nl">?Goal</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">refine</span>((sq_ap011_compose c2t&#39; t2c loop loop)
      @lr (cu_ap t2c (c2t&#39;_beta.<span class="mi">2</span>.<span class="mi">2</span>))
      @lr (Torus_rec_beta_surf _ _ _ _ _)
      @lr (cu_flip_lr (sq_ap_idmap _))
      @lr (sq_ap_uncurry _ _ _)).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
<span class="c">(* refine (cu_concat_lr (sq_ap2_compose c2t&#39; t2c loop loop) _</span>
<span class="c">      (sji0:=?[X1]) (sji1:=?X1) (sj0i:=?[Y1]) (sj1i:=?Y1) (pj11:=1)).</span>
<span class="c">    refine (cu_concat_lr (cu_ap t2c (c2t&#39;_beta.2.2)) _</span>
<span class="c">      (sji0:=?[X2]) (sji1:=?X2) (sj0i:=?[Y2]) (sj1i:=?Y2) (pj11:=1)).</span>
<span class="c">    refine (cu_concat_lr (Torus_rec_beta_surf _ _ _ _ _) _</span>
<span class="c">      (sji0:=?[X3]) (sji1:=?X3) (sj0i:=?[Y3]) (sj1i:=?Y3) (pj11:=1)).</span>
<span class="c">    refine (cu_concat_lr (cu_flip_lr (sq_ap_idmap _)) _</span>
<span class="c">      (sji0:=?[X4]) (sji1:=?X4) (sj0i:=?[Y4]) (sj1i:=?Y4) (pj11:=1)).</span>
<span class="c">    apply sq_ap_uncurry. *)</span>

</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equiv_torus_prod_Circle</span> : Torus &lt;~&gt; Circle * Circle
    := equiv_adjointify t2c c2t c2t2c t2c2t.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">TorusEquivCircle</span>.</span></span></span></pre>
</div>
</div></body>
</html>
